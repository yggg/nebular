(self.webpackChunknebular=self.webpackChunknebular||[]).push([[820],{80820:function(t,e,n){"use strict";n.r(e),n.d(e,{AzurePlaygroundModule:function(){return B}});var r,o=n(61116),u=n(31041),i=n(42693),c=n(55074),s=n(38851),a=n(40747),p=n(40878),f=n(44689),l=n(79996),h=n(47727),d=n(72994),g=n(9910),y=n(83357),b=n(36325),k=n(11785),m=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e.prototype.getValue=function(){return this.token.id_token},e.NAME="nb:auth:azure:token",e}(d.Xq),w=function(t){function e(){var e,n,r=null!==t&&t.apply(this,arguments)||this;return r.redirectResultHandlers=((e={})[g.aW.CODE]=function(){return(0,p.of)(r.route.snapshot.queryParams).pipe((0,f.w)(function(t){return t.code?r.requestToken(t.code):(0,p.of)(new y.g(!1,t,r.getOption("redirect.failure"),r.getOption("defaultErrors"),[]))}))},e.id_token=function(){var t=r.getOption("authorize.requireValidToken");return(0,p.of)(r.route.snapshot.fragment).pipe((0,l.U)(function(t){return r.parseHashAsQueryParams(t)}),(0,l.U)(function(e){return e.error?new y.g(!1,e,r.getOption("redirect.failure"),r.getOption("defaultErrors"),[]):new y.g(!0,e,r.getOption("redirect.success"),[],r.getOption("defaultMessages"),r.createToken(e,t))}),(0,h.K)(function(t){var e=[];return e.push(t instanceof d.ww?t.message:"Something went wrong."),(0,p.of)(new y.g(!1,t,r.getOption("redirect.failure"),e))}))},e),r.redirectResults=((n={})[g.aW.CODE]=function(){return(0,p.of)(null)},n.id_token=function(){return(0,p.of)(r.route.snapshot.fragment).pipe((0,l.U)(function(t){return r.parseHashAsQueryParams(t)}),(0,l.U)(function(t){return!(!t||!t.id_token&&!t.error)}))},n),r}return m(e,t),e.setup=function(t){return[e,t]},e.\u0275fac=function(){var t;return function(n){return(t||(t=k.n5z(e)))(n||e)}}(),e.\u0275prov=k.Yz7({token:e,factory:e.\u0275fac}),e}(b.F),A=n(63260),_=n(25416),Z=n(55959),z=n(98880),O=n(37010),T=function(){function t(t,e){var n=this;this.authService=t,this.router=e,this.destroy$=new Z.xQ,this.authService.authenticate("azure").pipe((0,_.R)(this.destroy$)).subscribe(function(t){t.isSuccess()&&t.getRedirect()&&n.router.navigateByUrl(t.getRedirect())})}return t.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},t.\u0275fac=function(e){return new(e||t)(k.Y36(z._),k.Y36(A.F0))},t.\u0275cmp=k.Xpm({type:t,selectors:[["nb-playground-azure-callback"]],decls:3,vars:0,template:function(t,e){1&t&&(k.TgZ(0,"nb-layout"),k.TgZ(1,"nb-layout-column"),k._uU(2,"Authenticating..."),k.qZA(),k.qZA())},directives:[O.Aq,O.dP],encapsulation:2}),t}(),q=n(96843);function S(t,e){if(1&t){var n=k.EpF();k.TgZ(0,"button",2),k.NdJ("click",function(){return k.CHM(n),k.oxw().login()}),k._uU(1,"Sign In with Azure"),k.qZA()}}function x(t,e){if(1&t){var n=k.EpF();k.TgZ(0,"button",3),k.NdJ("click",function(){return k.CHM(n),k.oxw().logout()}),k._uU(1,"Sign Out"),k.qZA()}}var U=[{path:"",component:function(){function t(t){var e=this;this.authService=t,this.destroy$=new Z.xQ,this.authService.onTokenChange().pipe((0,_.R)(this.destroy$)).subscribe(function(t){e.token=null,t&&t.isValid()&&(e.token=t)})}return t.prototype.login=function(){this.authService.authenticate("azure").pipe((0,_.R)(this.destroy$)).subscribe(function(t){})},t.prototype.logout=function(){this.authService.logout("azure").pipe((0,_.R)(this.destroy$)).subscribe(function(t){})},t.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},t.\u0275fac=function(e){return new(e||t)(k.Y36(z._))},t.\u0275cmp=k.Xpm({type:t,selectors:[["nb-playground-azure"]],decls:11,vars:6,consts:[["nbButton","","status","success",3,"click",4,"ngIf"],["nbButton","","status","warning",3,"click",4,"ngIf"],["nbButton","","status","success",3,"click"],["nbButton","","status","warning",3,"click"]],template:function(t,e){1&t&&(k.TgZ(0,"nb-layout"),k.TgZ(1,"nb-layout-column"),k.TgZ(2,"nb-card"),k.TgZ(3,"nb-card-body"),k.TgZ(4,"p"),k._uU(5),k.qZA(),k.TgZ(6,"p"),k._uU(7),k.ALo(8,"json"),k.qZA(),k.YNc(9,S,2,0,"button",0),k.YNc(10,x,2,0,"button",1),k.qZA(),k.qZA(),k.qZA(),k.qZA()),2&t&&(k.xp6(5),k.hij("Current User Authenticated: ",!!e.token,""),k.xp6(2),k.hij("Current User Token: ",k.lcZ(8,4,e.token),""),k.xp6(2),k.Q6J("ngIf",!e.token),k.xp6(1),k.Q6J("ngIf",e.token))},directives:[O.Aq,O.dP,q.As,q.yK,o.O5],pipes:[o.Ts],encapsulation:2}),t}()},{path:"callback",component:T}],C=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=k.oAB({type:t}),t.\u0275inj=k.cJS({imports:[[A.Bz.forChild(U)],A.Bz]}),t}(),B=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=k.oAB({type:t}),t.\u0275inj=k.cJS({providers:[w],imports:[[o.ez,u.u5,i.JF,a.S.forRoot({strategies:[w.setup({name:"azure",clientId:"bde728e2-2809-4ff1-bc9c-7fcb23800ebe",clientSecret:"",authorize:{endpoint:"https://login.microsoftonline.com/01513fd2-16a0-453b-9fa0-c9089bfa023e/oauth2/authorize",responseType:"id_token",scope:"openid",redirectUri:"https://akveo.github.io/nebular/example/azure/callback",params:{p:"b2c_1_nebular"}},token:{class:v},redirect:{success:"/example/azure"}})]}),c.z,s.B,C]]}),t}()}}]);
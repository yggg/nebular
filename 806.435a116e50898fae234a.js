(self.webpackChunknebular=self.webpackChunknebular||[]).push([[806],{30806:function(t,e,n){"use strict";n.r(e),n.d(e,{InfiniteListModule:function(){return G}});var o=n(61116),i=n(54014),s=n(55074),r=n(43956),a=n(63260),l=n(11785),c=n(47930),h=n(90611),p=n(2023),d=n(4991),u=n(7768),g=n(36541);function f(t,e,n){return 0===n?[e]:(t.push(e),t)}var m=n(2440),b=n(47931),w=n(79996),v=n(82628),x=n(42693),y=function(){function t(t){this.http=t}return t.prototype.load=function(t,e){var n=(t-1)%7*e;return this.http.get("assets/data/news.json").pipe((0,w.U)(function(t){return t.splice(n,e)}),(0,v.g)(1500))},t.\u0275fac=function(e){return new(e||t)(l.LFG(x.eN))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac}),t}(),P=n(29170),Z=n(1366),S=n(96843),T=n(44570),N=n(80334),_=function(){function t(){this.label="Loading"}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Xpm({type:t,selectors:[["nb-news-post-placeholder"]],hostVars:1,hostBindings:function(t,e){2&t&&l.uIk("aria-label",e.label)},decls:3,vars:0,consts:[[1,"title-placeholder"],[1,"text-placeholder"],[1,"link-placeholder"]],template:function(t,e){1&t&&(l._UZ(0,"div",0),l._UZ(1,"div",1),l._UZ(2,"div",2))},styles:["[_nghost-%COMP%]{display:block;width:100%}.title-placeholder[_ngcontent-%COMP%]{height:1.8rem;margin-bottom:.5rem;width:80%}.text-placeholder[_ngcontent-%COMP%]{height:4rem;margin-bottom:1rem}.link-placeholder[_ngcontent-%COMP%]{height:1.25rem;width:5rem}.nb-theme-default   [_nghost-%COMP%]   [class$=placeholder][_ngcontent-%COMP%]{background:#e4e9f2}.nb-theme-dark   [_nghost-%COMP%]   [class$=placeholder][_ngcontent-%COMP%]{background:#101426}.nb-theme-cosmic   [_nghost-%COMP%]   [class$=placeholder][_ngcontent-%COMP%]{background:#13132b}.nb-theme-corporate   [_nghost-%COMP%]   [class$=placeholder][_ngcontent-%COMP%]{background:#e4e9f2}"]}),t}(),q=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Xpm({type:t,selectors:[["nb-news-post"]],inputs:{post:"post"},decls:7,vars:3,consts:[[1,"h5"]],template:function(t,e){1&t&&(l.TgZ(0,"article"),l.TgZ(1,"h2",0),l._uU(2),l.qZA(),l.TgZ(3,"p"),l._uU(4),l.qZA(),l.TgZ(5,"a"),l._uU(6,"Read full article"),l.qZA(),l.qZA()),2&t&&(l.xp6(2),l.Oqu(e.post.title),l.xp6(2),l.Oqu(e.post.text),l.xp6(1),l.uIk("href",e.post.link,l.LSH))},encapsulation:2}),t}();function O(t,e){1&t&&(l.TgZ(0,"nb-list-item"),l._UZ(1,"nb-news-post-placeholder"),l.qZA())}function C(t,e){if(1&t&&(l.TgZ(0,"nb-list-item"),l._UZ(1,"nb-news-post",2),l.qZA()),2&t){var n=e.$implicit;l.xp6(1),l.Q6J("post",n)}}function A(t,e){1&t&&(l.TgZ(0,"nb-list-item"),l._UZ(1,"nb-news-post-placeholder"),l.qZA())}var z=function(){function t(t,e,n,i,s,r,a){this.newsService=t,this.router=e,this.route=n,this.scrollService=i,this.layoutService=s,this.platformId=r,this.window=a,this.news=[],this.topPlaceholders=[],this.bottomPlaceholders=[],this.pageSize=10,this.loadingNext=!1,this.loadingPrevious=!1,(0,o.NF)(this.platformId)&&this.window.history.scrollRestoration&&(this.initialScrollRestoration=a.history.scrollRestoration,history.scrollRestoration="manual")}return t.prototype.ngOnInit=function(){var t=this.route.snapshot.queryParams.page;this.startPage=t?Number.parseInt(t,10):100,this.pageToLoadNext=this.startPage},t.prototype.ngOnDestroy=function(){this.initialScrollRestoration&&(this.window.history.scrollRestoration=this.initialScrollRestoration)},t.prototype.updateUrl=function(t){this.router.navigate(["."],{queryParams:{page:t},replaceUrl:!0,relativeTo:this.route,queryParamsHandling:"merge"})},t.prototype.loadPrevious=function(){var t=this;this.loadingPrevious||1===this.startPage||(this.loadingPrevious=!0,this.topPlaceholders=new Array(this.pageSize),this.restoreScrollPosition(),this.startPage--,this.newsService.load(this.startPage,this.pageSize).subscribe(function(e){var n;t.topPlaceholders=[],(n=t.news).unshift.apply(n,e),t.loadingPrevious=!1},function(e){return t.startPage++}))},t.prototype.loadNext=function(){var t=this;this.loadingNext||(this.loadingNext=!0,this.bottomPlaceholders=new Array(this.pageSize),this.newsService.load(this.pageToLoadNext,this.pageSize).subscribe(function(e){var n;t.bottomPlaceholders=[],(n=t.news).push.apply(n,e),t.loadingNext=!1,t.pageToLoadNext++}))},t.prototype.restoreScrollPosition=function(){var t=this;(0,c.z)(this.layoutService.getDimensions(),this.scrollService.getPosition(),this.listItems.changes.pipe((0,h.q)(1)),this.layoutService.getDimensions(),this.scrollService.getPosition()).pipe(function(t,e){return arguments.length>=2?function(n){return(0,g.z)((0,p.R)(t,e),(0,d.h)(1),(0,u.d)(e))(n)}:function(e){return(0,g.z)((0,p.R)(function(e,n,o){return t(e,n,o+1)}),(0,d.h)(1))(e)}}(f,[])).subscribe(function(e){var n=e[4].y,o=e[3].scrollHeight-e[0].scrollHeight;e[1].y+o!==n&&t.scrollService.scrollTo(null,n+o)})},t.\u0275fac=function(e){return new(e||t)(l.Y36(y),l.Y36(a.F0),l.Y36(a.gz),l.Y36(P.H),l.Y36(Z.m),l.Y36(l.Lbi),l.Y36(m.Q3))},t.\u0275cmp=l.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&l.Gf(b.q,5,l.SBq),2&t&&l.iGM(n=l.CRH())&&(e.listItems=n)},features:[l._Bn([y])],decls:5,vars:6,consts:[["nbInfiniteList","","listenWindowScroll","","nbListPageTracker","",3,"threshold","pageSize","startPage","topThreshold","bottomThreshold","pageChange"],[4,"ngFor","ngForOf"],[3,"post"]],template:function(t,e){1&t&&(l.TgZ(0,"nb-card"),l.TgZ(1,"nb-list",0),l.NdJ("topThreshold",function(){return e.loadPrevious()})("bottomThreshold",function(){return e.loadNext()})("pageChange",function(t){return e.updateUrl(t)}),l.YNc(2,O,2,0,"nb-list-item",1),l.YNc(3,C,2,1,"nb-list-item",1),l.YNc(4,A,2,0,"nb-list-item",1),l.qZA(),l.qZA()),2&t&&(l.xp6(1),l.Q6J("threshold",500)("pageSize",e.pageSize)("startPage",e.startPage),l.xp6(1),l.Q6J("ngForOf",e.topPlaceholders),l.xp6(1),l.Q6J("ngForOf",e.news),l.xp6(1),l.Q6J("ngForOf",e.bottomPlaceholders))},directives:[S.As,b.z,T.s,N.B,o.sg,b.q,_,q],styles:["body{height:30rem}[_nghost-%COMP%]{display:block;margin:0 auto;max-width:50rem}.nb-spinner-container[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1 0 4rem;flex:1 0 4rem}"]}),t}();function k(t,e){if(1&t&&(l.TgZ(0,"nb-list-item"),l._UZ(1,"nb-news-post",4),l.qZA()),2&t){var n=e.$implicit;l.xp6(1),l.Q6J("post",n)}}function J(t,e){1&t&&(l.TgZ(0,"nb-list-item"),l._UZ(1,"nb-news-post-placeholder"),l.qZA())}function U(t,e){if(1&t&&(l.TgZ(0,"nb-list-item"),l._UZ(1,"nb-news-post",4),l.qZA()),2&t){var n=e.$implicit;l.xp6(1),l.Q6J("post",n)}}function Q(t,e){1&t&&(l.TgZ(0,"nb-list-item"),l._UZ(1,"nb-news-post-placeholder"),l.qZA())}var Y=function(){function t(t){this.newsService=t,this.firstCard={news:[],placeholders:[],loading:!1,pageToLoadNext:1},this.secondCard={news:[],placeholders:[],loading:!1,pageToLoadNext:1},this.pageSize=10}return t.prototype.loadNext=function(t){t.loading||(t.loading=!0,t.placeholders=new Array(this.pageSize),this.newsService.load(t.pageToLoadNext,this.pageSize).subscribe(function(e){var n;t.placeholders=[],(n=t.news).push.apply(n,e),t.loading=!1,t.pageToLoadNext++}))},t.\u0275fac=function(e){return new(e||t)(l.Y36(y))},t.\u0275cmp=l.Xpm({type:t,selectors:[["ng-component"]],features:[l._Bn([y])],decls:12,vars:6,consts:[[1,"own-scroll"],["nbInfiniteList","",3,"threshold","bottomThreshold"],[4,"ngFor","ngForOf"],["nbInfiniteList","","listenWindowScroll","",3,"threshold","bottomThreshold"],[3,"post"]],template:function(t,e){1&t&&(l.TgZ(0,"nb-card",0),l.TgZ(1,"nb-card-header"),l._uU(2," Own scroll "),l.qZA(),l.TgZ(3,"nb-list",1),l.NdJ("bottomThreshold",function(){return e.loadNext(e.firstCard)}),l.YNc(4,k,2,1,"nb-list-item",2),l.YNc(5,J,2,0,"nb-list-item",2),l.qZA(),l.qZA(),l.TgZ(6,"nb-card"),l.TgZ(7,"nb-card-header"),l._uU(8," Window scroll "),l.qZA(),l.TgZ(9,"nb-list",3),l.NdJ("bottomThreshold",function(){return e.loadNext(e.secondCard)}),l.YNc(10,U,2,1,"nb-list-item",2),l.YNc(11,Q,2,0,"nb-list-item",2),l.qZA(),l.qZA()),2&t&&(l.xp6(3),l.Q6J("threshold",500),l.xp6(1),l.Q6J("ngForOf",e.firstCard.news),l.xp6(1),l.Q6J("ngForOf",e.firstCard.placeholders),l.xp6(4),l.Q6J("threshold",500),l.xp6(1),l.Q6J("ngForOf",e.secondCard.news),l.xp6(1),l.Q6J("ngForOf",e.secondCard.placeholders))},directives:[S.As,S.nd,b.z,T.s,o.sg,b.q,q,_],styles:["body{height:30rem}[_nghost-%COMP%]{display:block;margin:0 auto;max-width:50rem}.nb-spinner-container[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1 0 4rem;flex:1 0 4rem}","[_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}nb-card[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1 1 45%;flex:1 1 45%;margin:0 2.5%}nb-card.own-scroll[_ngcontent-%COMP%]{height:30rem}"]}),t}();function I(t,e){if(1&t&&(l.TgZ(0,"nb-list-item"),l._UZ(1,"nb-news-post",2),l.qZA()),2&t){var n=e.$implicit;l.xp6(1),l.Q6J("post",n)}}function L(t,e){1&t&&(l.TgZ(0,"nb-list-item"),l._UZ(1,"nb-news-post-placeholder"),l.qZA())}var M=function(){function t(t){this.newsService=t,this.news=[],this.placeholders=[],this.pageSize=10,this.pageToLoadNext=1,this.loading=!1}return t.prototype.loadNext=function(){var t=this;this.loading||(this.loading=!0,this.placeholders=new Array(this.pageSize),this.newsService.load(this.pageToLoadNext,this.pageSize).subscribe(function(e){var n;t.placeholders=[],(n=t.news).push.apply(n,e),t.loading=!1,t.pageToLoadNext++}))},t.\u0275fac=function(e){return new(e||t)(l.Y36(y))},t.\u0275cmp=l.Xpm({type:t,selectors:[["ng-component"]],features:[l._Bn([y])],decls:4,vars:3,consts:[["nbInfiniteList","","listenWindowScroll","",3,"threshold","bottomThreshold"],[4,"ngFor","ngForOf"],[3,"post"]],template:function(t,e){1&t&&(l.TgZ(0,"nb-card"),l.TgZ(1,"nb-list",0),l.NdJ("bottomThreshold",function(){return e.loadNext()}),l.YNc(2,I,2,1,"nb-list-item",1),l.YNc(3,L,2,0,"nb-list-item",1),l.qZA(),l.qZA()),2&t&&(l.xp6(1),l.Q6J("threshold",500),l.xp6(1),l.Q6J("ngForOf",e.news),l.xp6(1),l.Q6J("ngForOf",e.placeholders))},directives:[S.As,b.z,T.s,o.sg,b.q,q,_],styles:["body{height:30rem}[_nghost-%COMP%]{display:block;margin:0 auto;max-width:50rem}.nb-spinner-container[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1 0 4rem;flex:1 0 4rem}"]}),t}(),F=n(43835),R=n(37118);function B(t,e){if(1&t&&(l.TgZ(0,"nb-list-item"),l._UZ(1,"nb-news-post",3),l.qZA()),2&t){var n=e.$implicit;l.xp6(1),l.Q6J("post",n)}}function H(t,e){1&t&&(l.TgZ(0,"nb-list-item"),l._UZ(1,"nb-news-post-placeholder"),l.qZA())}var $=[{path:"infinite-list-placeholders.component",component:z},{path:"infinite-list-scroll-modes.component",component:Y},{path:"infinite-list-showcase.component",component:M},{path:"infinite-news-list.component",component:function(){function t(t,e,n,i,s,r){this.newsService=t,this.router=e,this.route=n,this.scrollService=i,this.platformId=s,this.window=r,this.news=[],this.placeholders=[],this.pageSize=10,this.loadingNext=!1,this.loadingPrevious=!1,(0,o.NF)(this.platformId)&&this.window.history.scrollRestoration&&(this.initialScrollRestoration=r.history.scrollRestoration,history.scrollRestoration="manual")}return t.prototype.ngOnInit=function(){var t=this.route.snapshot.queryParams.page;this.startPage=t?Number.parseInt(t,10):1,this.pageToLoadNext=this.startPage},t.prototype.ngOnDestroy=function(){this.initialScrollRestoration&&(this.window.history.scrollRestoration=this.initialScrollRestoration)},t.prototype.updateUrl=function(t){this.router.navigate(["."],{queryParams:{page:t},replaceUrl:!0,relativeTo:this.route,queryParamsHandling:"merge"})},t.prototype.loadPrevious=function(){var t=this;this.loadingPrevious||1===this.startPage||(this.loadingPrevious=!0,this.newsService.load(this.startPage-1,this.pageSize).subscribe(function(e){var n;(n=t.news).unshift.apply(n,e),t.loadingPrevious=!1,t.restoreScrollPosition(),t.startPage--}))},t.prototype.loadNext=function(){var t=this;this.loadingNext||(this.loadingNext=!0,this.placeholders=new Array(this.pageSize),this.newsService.load(this.pageToLoadNext,this.pageSize).subscribe(function(e){var n;t.placeholders=[],(n=t.news).push.apply(n,e),t.loadingNext=!1,t.pageToLoadNext++}))},t.prototype.restoreScrollPosition=function(){var t=this,e=this.listItems.length>0?this.listItems.first.nativeElement:null;this.listItems.changes.pipe((0,w.U)(function(){return t.listItems.first.nativeElement}),(0,F.h)(function(t){return t!==e}),(0,h.q)(1)).subscribe(function(){for(var n,o,i,s,r=0,a=0,l=t.listItems.toArray();a<l.length;a++){var c=l[a].nativeElement;if(c===e)break;r+=(o=void 0,o=t.window.getComputedStyle(n=c),i=parseInt(o.getPropertyValue("margin-top"),10),s=parseInt(o.getPropertyValue("margin-bottom"),10),n.offsetHeight+i+s)}t.scrollService.scrollTo(null,r)})},t.\u0275fac=function(e){return new(e||t)(l.Y36(y),l.Y36(a.F0),l.Y36(a.gz),l.Y36(P.H),l.Y36(l.Lbi),l.Y36(m.Q3))},t.\u0275cmp=l.Xpm({type:t,selectors:[["ng-component"]],viewQuery:function(t,e){var n;1&t&&l.Gf(b.q,5,l.SBq),2&t&&l.iGM(n=l.CRH())&&(e.listItems=n)},features:[l._Bn([y])],decls:5,vars:6,consts:[[3,"nbSpinner"],["nbInfiniteList","","listenWindowScroll","","nbListPageTracker","",3,"threshold","pageSize","startPage","topThreshold","bottomThreshold","pageChange"],[4,"ngFor","ngForOf"],[3,"post"]],template:function(t,e){1&t&&(l.TgZ(0,"nb-card"),l._UZ(1,"div",0),l.TgZ(2,"nb-list",1),l.NdJ("topThreshold",function(){return e.loadPrevious()})("bottomThreshold",function(){return e.loadNext()})("pageChange",function(t){return e.updateUrl(t)}),l.YNc(3,B,2,1,"nb-list-item",2),l.YNc(4,H,2,0,"nb-list-item",2),l.qZA(),l.qZA()),2&t&&(l.xp6(1),l.Q6J("nbSpinner",e.loadingPrevious),l.xp6(1),l.Q6J("threshold",500)("pageSize",e.pageSize)("startPage",e.startPage),l.xp6(1),l.Q6J("ngForOf",e.news),l.xp6(1),l.Q6J("ngForOf",e.placeholders))},directives:[S.As,R.Q,b.z,T.s,N.B,o.sg,b.q,q,_],styles:["body{height:30rem}[_nghost-%COMP%]{display:block;margin:0 auto;max-width:50rem}.nb-spinner-container[_ngcontent-%COMP%]{-webkit-box-flex:1;-ms-flex:1 0 4rem;flex:1 0 4rem}"]}),t}()}],X=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[a.Bz.forChild($)],a.Bz]}),t}(),G=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[o.ez,i.C,s.z,r.u,X]]}),t}()}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[63],{"/VH1":function(t,e,n){"use strict";n.r(e),n.d(e,"AzurePlaygroundModule",function(){return K});var r,o=n("ofXK"),c=n("3Pt+"),i=n("tk/3"),u=n("0AKQ"),a=n("F4EV"),s=n("Abgx"),b=n("LRne"),p=n("eIep"),f=n("lJxs"),l=n("JIr8"),h=n("4pP6"),d=n("89WS"),y=n("V1Ee"),g=n("X/Iy"),O=n("fXoL"),k=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return k(e,t),e.prototype.getValue=function(){return this.token.id_token},e.NAME="nb:auth:azure:token",e}(h.c),v=function(t){function e(){var e,n,r=null!==t&&t.apply(this,arguments)||this;return r.redirectResultHandlers=((e={})[d.c.CODE]=function(){return Object(b.a)(r.route.snapshot.queryParams).pipe(Object(p.a)(function(t){return t.code?r.requestToken(t.code):Object(b.a)(new y.a(!1,t,r.getOption("redirect.failure"),r.getOption("defaultErrors"),[]))}))},e.id_token=function(){var t=r.getOption("authorize.requireValidToken");return Object(b.a)(r.route.snapshot.fragment).pipe(Object(f.a)(function(t){return r.parseHashAsQueryParams(t)}),Object(f.a)(function(e){return e.error?new y.a(!1,e,r.getOption("redirect.failure"),r.getOption("defaultErrors"),[]):new y.a(!0,e,r.getOption("redirect.success"),[],r.getOption("defaultMessages"),r.createToken(e,t))}),Object(l.a)(function(t){var e=[];return e.push(t instanceof h.a?t.message:"Something went wrong."),Object(b.a)(new y.a(!1,t,r.getOption("redirect.failure"),e))}))},e),r.redirectResults=((n={})[d.c.CODE]=function(){return Object(b.a)(null)},n.id_token=function(){return Object(b.a)(r.route.snapshot.fragment).pipe(Object(f.a)(function(t){return r.parseHashAsQueryParams(t)}),Object(f.a)(function(t){return!(!t||!t.id_token&&!t.error)}))},n),r}return k(e,t),e.setup=function(t){return[e,t]},e.\u0275prov=O.Mb({token:e,factory:e.\u0275fac=function(t){return w(t||e)}}),e}(g.a),w=O.Yb(v),j=n("tyNb"),V=n("1G5W"),_=n("XNiG"),z=n("BDhN"),S=n("vuB0"),W=function(){function t(t,e){var n=this;this.authService=t,this.router=e,this.destroy$=new _.a,this.authService.authenticate("azure").pipe(Object(V.a)(this.destroy$)).subscribe(function(t){t.isSuccess()&&t.getRedirect()&&n.router.navigateByUrl(t.getRedirect())})}return t.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},t.\u0275fac=function(e){return new(e||t)(O.Qb(z.a),O.Qb(j.c))},t.\u0275cmp=O.Kb({type:t,selectors:[["nb-playground-azure-callback"]],decls:3,vars:0,template:function(t,e){1&t&&(O.Wb(0,"nb-layout"),O.Wb(1,"nb-layout-column"),O.Kc(2,"Authenticating..."),O.Vb(),O.Vb())},directives:[S.b,S.a],encapsulation:2}),t}(),I=n("S+eJ");function A(t,e){if(1&t){var n=O.Xb();O.Wb(0,"button",2),O.gc("click",function(){return O.Bc(n),O.kc().login()}),O.Kc(1,"Sign In with Azure"),O.Vb()}}function $(t,e){if(1&t){var n=O.Xb();O.Wb(0,"button",3),O.gc("click",function(){return O.Bc(n),O.kc().logout()}),O.Kc(1,"Sign Out"),O.Vb()}}var B=[{path:"",component:function(){function t(t){var e=this;this.authService=t,this.destroy$=new _.a,this.authService.onTokenChange().pipe(Object(V.a)(this.destroy$)).subscribe(function(t){e.token=null,t&&t.isValid()&&(e.token=t)})}return t.prototype.login=function(){this.authService.authenticate("azure").pipe(Object(V.a)(this.destroy$)).subscribe(function(t){})},t.prototype.logout=function(){this.authService.logout("azure").pipe(Object(V.a)(this.destroy$)).subscribe(function(t){})},t.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},t.\u0275fac=function(e){return new(e||t)(O.Qb(z.a))},t.\u0275cmp=O.Kb({type:t,selectors:[["nb-playground-azure"]],decls:11,vars:6,consts:[["nbButton","","status","success",3,"click",4,"ngIf"],["nbButton","","status","warning",3,"click",4,"ngIf"],["nbButton","","status","success",3,"click"],["nbButton","","status","warning",3,"click"]],template:function(t,e){1&t&&(O.Wb(0,"nb-layout"),O.Wb(1,"nb-layout-column"),O.Wb(2,"nb-card"),O.Wb(3,"nb-card-body"),O.Wb(4,"p"),O.Kc(5),O.Vb(),O.Wb(6,"p"),O.Kc(7),O.lc(8,"json"),O.Vb(),O.Ic(9,A,2,0,"button",0),O.Ic(10,$,2,0,"button",1),O.Vb(),O.Vb(),O.Vb(),O.Vb()),2&t&&(O.Db(5),O.Mc("Current User Authenticated: ",!!e.token,""),O.Db(2),O.Mc("Current User Token: ",O.mc(8,4,e.token),""),O.Db(2),O.qc("ngIf",!e.token),O.Db(1),O.qc("ngIf",e.token))},directives:[S.b,S.a,I.b,I.a,o.o],pipes:[o.i],encapsulation:2}),t}()},{path:"callback",component:W}],D=function(){function t(){}return t.\u0275mod=O.Ob({type:t}),t.\u0275inj=O.Nb({factory:function(e){return new(e||t)},imports:[[j.g.forChild(B)],j.g]}),t}(),K=function(){function t(){}return t.\u0275mod=O.Ob({type:t}),t.\u0275inj=O.Nb({factory:function(e){return new(e||t)},providers:[v],imports:[[o.c,c.g,i.c,s.a.forRoot({strategies:[v.setup({name:"azure",clientId:"bde728e2-2809-4ff1-bc9c-7fcb23800ebe",clientSecret:"",authorize:{endpoint:"https://login.microsoftonline.com/01513fd2-16a0-453b-9fa0-c9089bfa023e/oauth2/authorize",responseType:"id_token",scope:"openid",redirectUri:"https://akveo.github.io/nebular/example/azure/callback",params:{p:"b2c_1_nebular"}},token:{class:m},redirect:{success:"/example/azure"}})]}),u.a,a.a,D]]}),t}()}}]);